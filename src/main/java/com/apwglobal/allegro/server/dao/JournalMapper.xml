<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.apwglobal.allegro.server.dao.JournalDao">


    <select id="findLastRowId" parameterType="long" resultType="java.util.Optional">
        SELECT max(rowid) FROM journals WHERE sellerid = #{sellerId}
    </select>

    <select id="getLastJournals" parameterType="map" resultType="com.apwglobal.nice.domain.Journal">
        SELECT * FROM journals
        WHERE sellerid = #{sellerId}
        ORDER BY rowid DESC
        LIMIT #{limit}
    </select>

    <insert id="saveJournal">
        INSERT INTO journals
            (rowid, itemid, sellerId, changetype, changedate, currentprice)
        VALUES
            (#{rowId}, #{itemId}, #{sellerId}, #{changeType}, #{changeDate}, #{currentPrice,jdbcType=DOUBLE})
    </insert>

</mapper>